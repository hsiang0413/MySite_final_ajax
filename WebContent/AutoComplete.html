<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Insert title here</title>
<link rel="stylesheet" href="css/bootstrap.min.css">


</head>
<body>
	<div class="container">
		<nav class="navbar navbar-default">
			<div class="container-fluid">
				<!-- Brand and toggle get grouped for better mobile display -->
				<div class="navbar-header">
					<button type="button" class="navbar-toggle collapsed"
						data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"
						aria-expanded="false">
						<span class="sr-only">Toggle navigation</span> <span
							class="icon-bar"></span> <span class="icon-bar"></span> <span
							class="icon-bar"></span>
					</button>
					<a class="navbar-brand" href="#">Ajax Site</a>
				</div>

				<!-- Collect the nav links, forms, and other content for toggling -->
				<div class="collapse navbar-collapse"
					id="bs-example-navbar-collapse-1">
					<ul class="nav navbar-nav">
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown" role="button" aria-haspopup="true"
							aria-expanded="false">XMLHttpRequest<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li><a href="AjaxFirst.html">同步</a></li>
								<li><a href="AjaxAsync.html">非同步</a></li>
								<li><a href="AjaxGet.html">Get</a></li>
								<li><a href="AjaxPost.html">Post</a></li>
								<li><a href="AjaxForOldIE.html">OldIE</a></li>
							</ul></li>
						<li><a href="AjaxXML.html">XML</a></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown" role="button" aria-haspopup="true"
							aria-expanded="false">JSON<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li><a href="JSON.html">JSON</a></li>
								<li><a href="AjaxJSON.html">AjaxJSON</a></li>
								<li><a href="JSONP.html">JSONP</a></li>
							</ul></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown" role="button" aria-haspopup="true"
							aria-expanded="false">Ajax New<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li><a href="Ajax2Event.html">Ajax2Event</a></li>
								<li><a href="FormData.html">FormData</a></li>
								<li><a href="Cors.html">Cors</a></li>
							</ul></li>
						<li class="dropdown"><a href="#" class="dropdown-toggle"
							data-toggle="dropdown" role="button" aria-haspopup="true"
							aria-expanded="false">作業<span class="caret"></span></a>
							<ul class="dropdown-menu">
								<li><a href="Register.html">帳號檢查</a></li>
								<li><a href="RssReader.html">RSS閱讀器</a></li>
								<li><a href="AutoComplete.html">自動完成</a></li>
							</ul></li>

					</ul>


				</div>
				<!-- /.navbar-collapse -->
			</div>
			<!-- /.container-fluid -->
		</nav>
	</div>
	<div class="container">


		<!-- Jumbotron -->
		<div class="jumbotron">
			<div class="page-header">
				<h3>
					作業三 <small>AutoComplete</small>
				</h3>
			</div>
			<!-- 每頁不同的內容從這裡開始 -->

			<form name="myData" action="Index.jsp" method="get">
				<div class="form-group">
					<input type="text" class="form-control" id="txtSearch"
						name="keyword" autocomplete="off">
					<!-- 				    <input type="submit" -->
					<!-- 						value="送出" class="btn btn-default btn-xs"> -->
				</div>
			</form>
			<div id="div1"></div>


			<!-- 每頁不同的內容到這裡結束 -->
		</div>

		<div class="row">
			<div class="col-md-4">
				<h2>HTML5</h2>
				<p>HTML5是HTML最新的修訂版本，2014年10月由全球資訊網協會（W3C）完成標準制定。[2][3][4]目標是取代1999年所製定的HTML
					4.01和XHTML 1.0標準，以期能在網際網路應用迅速發展的時候，使網路標準達到符合當代的網路需求。</p>
				<p>
					<a class="btn btn-primary"
						href="https://zh.wikipedia.org/wiki/HTML5" role="button">詳細資料
						&raquo;</a>
				</p>
			</div>
			<div class="col-md-4">
				<h2>CSS3</h2>
				<p>階層式樣式表，一種用來為結構化文件（如HTML文件或XML應用）添加樣式（字型、間距和顏色等）的電腦語言，由W3C定義和維護。目前最新版本是CSS2.1，為W3C的推薦標準。CSS3現在已被大部分現代瀏覽器支援，而下一版的CSS4仍在開發過程中。</p>
				<p>
					<a class="btn btn-primary"
						href="https://zh.wikipedia.org/wiki/%E5%B1%82%E5%8F%A0%E6%A0%B7%E5%BC%8F%E8%A1%A8#CSS3"
						role="button">詳細資料 &raquo;</a>
				</p>
			</div>
			<div class="col-md-4">
				<h2>JavaScript</h2>
				<p>JavaScript，直譯式程式語言，是一種動態型別、基於原型的語言，內建支援類別。它的直譯器被稱為JavaScript引擎，為瀏覽器的一部分，廣泛用於用戶端的腳本語言，最早是在HTML網頁上使用，用來給HTML網頁增加動態功能。現在JavaScript也可被用於網路伺服器，如Node.js。</p>
				<p>
					<a class="btn btn-primary"
						href="https://zh.wikipedia.org/wiki/JavaScript" role="button">詳細資料
						&raquo;</a>
				</p>
			</div>
		</div>

		<!-- Site footer -->
		<footer class="footer">
			<p>&copy; IIIEDU</p>
		</footer>

	</div>
	<!-- /container -->


	<script src="js/jquery-1.9.1.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/myXMLHttp.js"></script>

	<script>
		//將資料存到陣列中
// 		var datas = [ "aaaaa", "bbbbb", "ccccc", "ddddd", "eeeee", "fffff",
// 				"ggggg", "hhhhh", "iiiii", "jjjjj" ];
		//改呼叫 JsonSimpleDemo servlet 會回傳陣列的資料
		var show;
		window.addEventListener("load", init, false);//監控，網頁一直行就先把陣列載入選項中
		function init() {
			var txt = document.getElementById("txtSearch");//下拉尋找列表
			txt.addEventListener("keyup", getData, false);//發生keyup事件時，使用getData方法
			show = document.getElementById("div1");//之後要把東西放到show中
		}
		function getData() {
			show.style.display = "block";//若下拉列表有內容，則清空重來
			if (show.childNodes.length > 0) {
				show.removeChild(show.childNodes[0]);
			}
			var eleDiv = document.createElement("div");//創造一個div
			eleDiv.className = "list-group";//在bootstrap中定義的style，是下拉式選單的樣式
			//up don't touch
			
			
			var xhr=null;
			xhr=initXMLHttpRequest();//取得JsonSimpleDemo?id=x的結果(是一個物件)
			if(xhr!=null){//如果有物件傳回
				xhr.addEventListener("readystatechange",function(){
					if(xhr.readyState == 4){
						if(xhr.status == 200){
							//console.log("test2");
							var stringDates=xhr.responseText;//取得收到的字串，轉換為json物件(是一個單純的陣列)
							//alert(stringDates);
							var datas=JSON.parse(stringDates);
							//alert(datas)
							
							
			//down don't touch
			for (var j = 0, max = datas.length; j < max; j++) {//陣列有長度
				var txtBtn = document.createTextNode(datas[j]);//為每一個陣列裡的字串創造一個節點
				var eleBtn = document.createElement("button");//創造元素節點
				eleBtn.className = "list-group-item";//幫元素套上樣式
				eleBtn.setAttribute("type", "button");//元素type=button
				eleBtn.appendChild(txtBtn);//把字串節點放進元素節點裡<eleBtn>txtBtn</eleBtn>

				eleBtn.addEventListener("click", function() {//當點擊時myData中的value(也就是輸入欄位)就會變成被點擊物件的字串
					document.myData.keyword.value = this.firstChild.nodeValue;//firstChild就是字串元素，nodeValue是字串內容
					show.style.display = "none";
				}, false);
				eleDiv.appendChild(eleBtn);//東西通通加進去
			}
			show.appendChild(eleDiv);
			//up don't touch
			
			
			}else{alert(xhr.status + ":" + xhr.statusText);}//status end
			}//redystate end
			})//function end
			
			//使用get的方式，將資料document.myData.keyword.value(使用者輸入資料)傳到Server端Products.java的程式
			if(document.myData.keyword.value!=null && document.myData.keyword.value!=""){
			xhr.open("get","JsonSimpleDemo?keyword="+document.myData.keyword.value);//傳送給JsonSimpleDemo
			xhr.send();
			}//if not null and ""
			}//if xhr!=null end
		}//getdata end
	</script>
</body>

</html>